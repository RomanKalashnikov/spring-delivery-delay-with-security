# spring-delivery-delay
***Проблема***<br>
**Курьер едет вручать груз. И ему внезапно потребовалось сообщить клиенту, что он сегодня не успеет приехать. 
Курьер за рулем и ему неудобно звонить клиенту и договариваться о новом времени доставки.** <br>
***Предлагаемое решение*** <br>
Курьеру нужно оповестить Call-центр в “один клик”, чтобы они позвонили клиенту и договорились о новой дате и времени доставки. 
Пользователями сервиса будут являться курьеры и операторы Call-центра. <br>
***Техническое задание***<br>
Необходимо разработать REST-сервис, позволяющий курьеру добавлять задания в call-центр. Формат обмена данными - JSON. <br>
Для этого нужно реализовать REST API методы со следующим функционалом: <br>
● Метод обработки сообщения от курьера “Не успеваю”. При вызове метода добавляется новое задание для call-центра в БД. <br>
● Метод, возвращающий список заданий для прозвона клиентов. 
Обязательные поля в ответе: ​Номер заказа​, ​Дата, Время добавления задания, Признак выполненного задания (true/false)​. 
Метод должен поддерживать возможность фильтрации списка заданий по трем параметрам: обязательные параметры (не может быть равен null) - Диапазон дат​, 
дополнительный параметр (может быть равен null) - ​Номер заказа​. <br>
*Опционально (эти пункты не являются обязательными, но будут дополнительным плюсом):* <br>
● написать тесты для проверки функционала системы (для тестов использовать JUnit 4 или 5, а также любые дополнительные библиотеки, если они будут необходимы) <br>
● написать скрипты миграции для создания схемы БД и заполнения тестовыми данными, используя Flyway или Liquibase <br>
***Стек технологий*** <br>
База данных <br>
H2 или Postgresql <br>
***Технологии*** <br>
● Java 8 <br>
● Spring Boot 2 <br>
● Maven <br>
● Работа с базой данных - можно использовать любой из следующих вариантов: <br>
○ JPA Hibernate <br>
○ Spring JdbcTemplate <br>
○ MyBatis *<br>

###*Инструкция по старту приложения* <br>
В роли БД используется **PostgreSQL**. Для работы с БД **Spring JdbcTemplate**. Для логгирования – **Sl4j**. Для тестов – **jUnit5**. 
Для маппинга – **MapStruct**, а так же **Lombok**.<br>
Перед первым запуском необходимо в файле application.yml – указать корректный URL, driverClassName, username и password  для используемой БД.<br>

Также в классе TaskRepositoryImpl в методе postInit, помеченной аннотацией @PostConstruct происходит создание таблицы с правильно расставленными типами данных в колонках.<br>
Запросы передаются в формате **JSON**. URL-адрес для запросов должен заканчиваться на /tasks<br>

***Функционал доступный для POST-запросов:***<br>
*Добавление нового задания –необходимо в теле зпроса передать заполненные поля orderNumber и completed*<br>
**Пример:**<br>
*{<br>
    "orderNumber" : 40,<br>
    "completed" : "false"<br>
 }*<br>

***Функционал доступный для GET-запросов:***<br>
*Получения списка всех задач – выполнить пустой запрос.<br>
Получения списка задач с использованием фильтрации по диапазону дат 
– передать параметры start и end указывающие на дату не ранее и не позднее необходимых.<br>*
**Пример:**<br>
***localhost:8080/tasks?start=2020-07-14 00:21:27&end=2020-07-16 03:25:27***<br>
*Получение списка задач с использованием фильрации по диапазону дат и номера заказа – передать параметры start, end и orderNumber.<br>*
**Пример:**<br>
***localhost:8080/tasks?start=2020-07-14 00:21:27&end=2020-07-16 03:25:27&orderNumber=40***<br>

В случае отсутствия данных в таблице, удовлетворяющих фильтру, вернётся  ответ с пустым телом.<br>



